<!DOCTYPE html>

<head>
  <meta charset="utf-8">
  <title>3dioSpaceOdyssey</title>
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <!-- Javascript libraries online-->
  <script src="https://aframe.io/releases/0.7.1/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-animation-component@3.2.5/dist/aframe-animation-component.min.js"></script>
  <script src="https://dist.3d.io/3dio-js/1.1.x/3dio.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js" type="text/javascript"></script>
  <script src="https://code.jquery.com/jquery-3.3.1.min.js" type="text/javascript" intergrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
  <script src="js/webflow.js" type="text/javascript"></script>
<!-- Javascript libraries local
  <script src="js/aframe-event-set-component.min.js"></script>
  <script src="js/aframe-template-component.min.js"></script>
  <script src="js/aframe.min.js"></script>
  <script src="js/webflow.js"></script>
-->
  <!-- Stylesheets -->
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/3diospaceodyssey.webflow.css" rel="stylesheet" type="text/css">
  <script type="text/javascript">WebFont.load({  google: {    families: ["Open Sans:300,300italic,400,400italic,600,600italic,700,700italic,800,800italic","Exo:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic"]  }});</script>
  <!-- [if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif] -->
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
</head>

<body class="body">

  <!-- Navigation -->
  <div class="maindiv">
    <div class="aframe w-clearfix">
      <!-- Aframe -->
      <a-scene embedded cursor="rayOrigin: mouse" vr-mode-ui="enabled: false" >
              <!-- Iso Camera -->
        <a-entity
          id="camera"
          camera="fov:0.1; zoom: 0.01; near: 20"
          position="-65 65 -65"
          rotation="-35 225 0"
          wasd-controls="acceleration:8;easing:5;"s
          look-controls="enabled:false">
        </a-entity>
        <!-- Assets-->
        <a-assets>
          <!-- Floors Models -->
          <a-asset-item id="floor"        src="obj/floor.obj"></a-asset-item>
          <a-asset-item id="floorLights"  src="obj/floorLights.obj"></a-asset-item>
          <a-asset-item id="wallSmall"    src="obj/wallSmall.obj"></a-asset-item>
          <a-asset-item id="wallDetailed" src="obj/wallDetailed.obj"></a-asset-item>
          <a-asset-item id="moulding"     src="obj/moulding.obj"></a-asset-item>
          <a-asset-item id="door"         src="obj/door.obj"></a-asset-item>
          <a-asset-item id="topSectionLow"src="obj/topSectionLow.obj"></a-asset-item>
          <a-asset-item id="topSectionHigh"src="obj/topSectionHigh.obj"></a-asset-item>
          <a-asset-item id="wallsWire"    src="obj/wallsWire.obj"></a-asset-item>
          <a-asset-item id="tableWire"    src="obj/tableWire.obj"></a-asset-item>
          <a-asset-item id="furniture"    src="obj/furniture.obj"></a-asset-item>
          <a-asset-item id="macbookPro"   src="obj/macbookPro.obj"></a-asset-item>

          <a-asset-item id="testingOBJ"   src="obj/TestingOBJ.obj"></a-asset-item>
          <a-asset-item id="colorTest"    src="images/testTex.png"></a-asset-item>

          <a-asset-item id="planFloor"    src="obj/planfloor.obj"></a-asset-item>
          <a-asset-item id="planTex"src="images/plantex.png"></a-aset-item>

        </a-assets>

        <!-- Floor Geometry -->
        <a-entity id="tower" position="0 0 0" rotation="0 0 0">
          <a-entity id="level2" position="-1 -60 -1" rotation="0 180 0">
            <a-obj-model src="#floor"         color="gray"    scale=".01 .01 .01"></a-obj-model>
            <a-obj-model src="#floorLights"   color="white"   scale=".01 .01 .01" ></a-obj-model>
            <a-obj-model src="#wallDetailed"  color="white"   scale=".01 .01 .01"></a-obj-model>
            <a-obj-model src="#furniture"     color="#9fa960" scale=".01 .01 .01"></a-obj-model>
            <a-obj-model src="#moulding"      color="#606060" scale=".01 .01 .01"></a-obj-model>
            <a-obj-model src="#door"          color="#606060" scale=".01 .01 .01"></a-obj-model>
            <a-obj-model src="#topSectionHigh"color="white"   scale=".01 .01 .01"></a-obj-model>
            <a-obj-model src="#macbookPro"    color="grey"    scale=".01 .01 .01"></a-obj-model>
          </a-entity>

          <a-entity id="level2" position="-1 -30 -1" rotation="0 180 0">
            <a-obj-model src="#floor"         color="gray"    scale=".01 .01 .01"></a-obj-model>
            <a-obj-model src="#floorLights"   color="white"   scale=".01 .01 .01" ></a-obj-model>
            <a-obj-model src="#wallDetailed"  color="white"   scale=".01 .01 .01"></a-obj-model>
            <a-obj-model src="#moulding"      color="#606060" scale=".01 .01 .01"></a-obj-model>
            <a-obj-model src="#door"          color="#606060" scale=".01 .01 .01"></a-obj-model>
            <a-obj-model src="#macbookPro"    color="grey"    scale=".01 .01 .01"></a-obj-model>
            <a-obj-model src="#topSectionHigh"color="black"   scale=".01 .01 .01"></a-obj-model>
            <a-obj-model src="#tableWire"     color="#10109f"   scale=".01 .01 .01" material="wireframe: true; wireframeLinewidth: 6"></a-obj-model>
          </a-entity>

          <a-entity id="level1" position="-1 0 -1" rotation="0 180 0">
            <a-obj-model src="#planFloor"     color="blue" scale=".01 .01 .01"></a-obj-model>
            <a-obj-model src="#macbookPro"    color="grey"    scale=".01 .01 .01"></a-obj-model>
            <a-obj-model src="#wallsWire"     color="#10109f"   scale=".01 .01 .01" material="wireframe: true"></a-obj-model>
            <a-obj-model src="#tableWire"     color="#10109f"   scale=".01 .01 .01" material="wireframe: true"></a-obj-model>
          </a-entity>
        </a-entity>
        <!-- Sky -->
        <a-sky color="#0f1110"></a-sky>
      </a-scene>
      <div class="aframenavspacer"></div>
      <div class="allnavbuttondiv">
        <a href="#" id="up" class="navbtn button up w-button">up</a>
        <a href="#" id="down" class="navbtn button down w-button">dn</a>
        <button id="rot" class="btnrot">rt</button>
      </div>
      <div class="navposall">
        <div class="navpos"></div>
        <div class="navpos"></div>
        <div class="navpos"></div>
        <div class="navpos"></div>
      </div>
    </div>
    <div class="_2001spaceodysseycopydiv">
      <div class="copyalldiv">
        <div class="titlediv">
          <div class="_3diotext">3d.io Presents</div>
          <div class="projecttitletext">2001: A <span class="text-span"><em xmlns="http://www.w3.org/1999/xhtml">Space</em></span> Odyssey</div>
        </div>
        <div class="infocopyalldiv">
          <div class="copytopdiv">
            <div class="text-block-2">Stage your spaces on 3d.io for free!</div>
          </div>
          <div class="copymiddiv">
            <div class="moveupcopy">
              <div class="text-block-3">UPLOAD YOUR PLAN TO 3D.IO AND WE TAKE CARE OF THE REST!</div>
              <div class="copygap"></div>
              <div class="text-block-3">OUR PROPRIETARY ALGORITHM WILL BUILD YOUR WALLS, DOORS, AND WINDOWS</div>
              <div class="copygap"></div>
              <div class="text-block-3">QUICKLY FURNISH YOUR SPACE WITH OUR Â GROWING FURNITURE LIBRARY</div>
              <div class="copygap"></div>
              <div class="text-block-3">DOWNLOAD YOUR MODEL OR EASILY SHOWCASE AND SHARE ON 3D.IO!</div>
              <div class="copygap"></div>
            </div>
          </div>
          <div class="copybottomdiv">
            <div class="text-block-4">Take Me There!</div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->

  <script>
  //constant variables
      const btns = document.querySelectorAll('.navbtn')
      const btnRot = document.querySelector('.btnrot')
      const towerEl = document.querySelector('#tower')

  //rotation functionality
  const rots = [0, 90, 180, 270, 360]
  var i = 0

  btnRot.addEventListener('click',rotTower)

  function rotTower()
  {
    console.log("you rotated");
    currentRot = rots[i]                //current rotation
    console.log(currentRot);
    i++                                 //moves the rot value

    if (i==rots.length){i = 0; currentRot=i; i++; newRot = rots[i]}
    if(i<rots.length){newRot = rots[i]}

    console.log(newRot);
    const rotParams = `property: rotation; from:0 ${currentRot} 0; to: 0 ${newRot} 0; dur: 2000; easing: easeInOutQuad`
    towerEl.removeAttribute('animation')
    towerEl.setAttribute('animation', rotParams)
  }

//move functionality
      const levels = [
        {lvl: 'lvl1', y: 0},
        {lvl: 'lvl2', y: 30},
        {lvl: 'lvl3', y: 60},
      ]
      let level = 0
      const lMin = 0
      const lMax = levels.length - 1
      //initial movement
      move(0)
      //bindings
      btns.forEach(btn => {
        btn.addEventListener('click', function(evt) {
          console.log(evt.target.id)
          delta = evt.target.id === 'up' ? -1 : 1
          move(delta)
        })
      })
      function move(delta){
        console.log("you moved")
          const yOld = levels[level].y
          //prevent moving out of the scope
          if (level + delta > lMax || level + delta < lMin) return
          level += delta
          const yNew = levels[level].y
          //applies move either up or down
          const moveParams = `property: position; from:0 ${yOld} 0; to: 0 ${yNew} 0; dur: 3000; easing: easeInOutQuad`
          towerEl.removeAttribute('animation')
          towerEl.setAttribute('animation', moveParams)
      }
    </script>

</body>
</html>
